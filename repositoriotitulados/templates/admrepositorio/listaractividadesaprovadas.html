{% extends 'dashboard.html' %}
{% load static %}
{% block content %}
<div class="container no-gutters p-lg-4 p-3">
    <div class="no-gutte p-lg-3 p-0">
        <h2 class="titlegeneral fontI colortitle pb-1 pt-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-folder-plus" viewBox="0 0 16 16">
                <path d="m.5 3 .04.87a2 2 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2m5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19q-.362.002-.683.12L1.5 2.98a1 1 0 0 1 1-.98z"/>
                <path d="M13.5 9a.5.5 0 0 1 .5.5V11h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V12h-1.5a.5.5 0 0 1 0-1H13V9.5a.5.5 0 0 1 .5-.5"/>
            </svg> Modalidad de Graduación Lista y Asignación de Repositorio
        </h2>
    
        <div class="btn-group drop mt-1" role="group">
            <a href="{% url 'home_reporte' %}" class="btn btn-outline-primary ">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-house-check-fill" viewBox="0 0 16 16">
                    <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/>
                    <path d="m8 3.293 4.712 4.712A4.5 4.5 0 0 0 8.758 15H3.5A1.5 1.5 0 0 1 2 13.5V9.293z"/>                <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.707l.547.547 1.17-1.951a.5.5 0 1 1 .858.514"/>
                </svg>
            </a>
            <a href="{% url 'listarepositorios' %}" class="btn btn btn-outline-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-inboxes mb-1" viewBox="0 0 16 16">
                    <path d="M4.98 1a.5.5 0 0 0-.39.188L1.54 5H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0A.5.5 0 0 1 10 5h4.46l-3.05-3.812A.5.5 0 0 0 11.02 1zm9.954 5H10.45a2.5 2.5 0 0 1-4.9 0H1.066l.32 2.562A.5.5 0 0 0 1.884 9h12.234a.5.5 0 0 0 .496-.438zM3.809.563A1.5 1.5 0 0 1 4.981 0h6.038a1.5 1.5 0 0 1 1.172.563l3.7 4.625a.5.5 0 0 1 .105.374l-.39 3.124A1.5 1.5 0 0 1 14.117 10H1.883A1.5 1.5 0 0 1 .394 8.686l-.39-3.124a.5.5 0 0 1 .106-.374zM.125 11.17A.5.5 0 0 1 .5 11H6a.5.5 0 0 1 .5.5 1.5 1.5 0 0 0 3 0 .5.5 0 0 1 .5-.5h5.5a.5.5 0 0 1 .496.562l-.39 3.124A1.5 1.5 0 0 1 14.117 16H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .121-.393zm.941.83.32 2.562a.5.5 0 0 0 .497.438h12.234a.5.5 0 0 0 .496-.438l.32-2.562H10.45a2.5 2.5 0 0 1-4.9 0z"/>
                </svg> Repositorio de Proyectos de los Titulados
            </a>    
        </div>
        {% if actividades_aprobadas %}
        <table class="table fontII">
            <thead>
                <tr>
                    <th>FOTO</th>
                    <th>ESTUDIANTE</th>
                    {% comment %} <th>TUTOR</th> {% endcomment %}
                    <th>DOCUMENTO</th>
                    <th>ASIGNAR</th>
                </tr>
            </thead>
            <tbody>
                
                {% for actividad in actividades_aprobadas %}
                <tr>
                    <td data-label="FOTO">
                        <div class="foto-container" id="fotoContainer">
                            {% if actividad.estudiante.imagen %}
                                <img src="{{ actividad.estudiante.imagen.url }}" class="rounded-img" alt="Foto del estudiante">
                            {% endif %}
                            {% if actividad.estudiante_uno.imagen %}
                                <img src="{{ actividad.estudiante_uno.imagen.url }}" class="rounded-img" alt="Foto del estudiante">
                            {% endif %}
                            {% if actividad.estudiante_dos.imagen %}
                                <img src="{{ actividad.estudiante_dos.imagen.url }}" class="rounded-img" alt="Foto del estudiante">
                            {% endif %}
                        </div>
                        <div id="sinFoto" style="display: none;">
                            <img src="{% static 'img/SINFOTO.webp' %}" class="rounded-img" alt="Sin foto">
                        </div>
                    </td>
                    
                    <td data-label="ESTUDIANTE" class="text-start">
                        <span>{{ actividad.estudiante }}</span><br>
                            {% if actividad.estudiante_uno %}
                                <span>{{ actividad.estudiante_uno }}</span><br>
                            {% endif %}
                            {% if actividad.estudiante_dos %}
                                <span>{{ actividad.estudiante_dos }}</span><br>
                            {% endif %}
                    </td>
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            const fotoContainer = document.getElementById('fotoContainer');
                            const sinFoto = document.getElementById('sinFoto');
                            const universitarios = document.getElementById('universitarios');
                            
                            // Verificar si el contenedor de fotos tiene alguna imagen
                            if (fotoContainer.children.length === 0) {
                                sinFoto.style.display = 'block'; // Mostrar el mensaje de "Sin foto"
                            } else {
                                sinFoto.style.display = 'none'; // Ocultar el mensaje de "Sin foto"
                            }
                    
                        });
                        document.addEventListener('DOMContentLoaded', function() {
                            const estudianteUno = document.getElementById('estudianteUno');
                            const estudianteDos = document.getElementById('estudianteDos');
                    
                            // Verifica si el contenido es "None" o está vacío y oculta el elemento correspondiente
                            if (!estudianteUno.textContent.trim()) {
                                estudianteUno.style.display = 'none';
                            }
                            if (!estudianteDos.textContent.trim()) {
                                estudianteDos.style.display = 'none';
                            }
                        });
                        
                    </script>
                    {% comment %} <td data-label="TUTOR">{{ actividad.tutor.nombre }} {{ actividad.tutor.apellido }}</td> {% endcomment %}
                    <td data-label="DOCUMENTO">
                        {% if actividad.documentacion %}
                            <a href="{{ actividad.documentacion.url }}" target="_blank" class="btn btn-sm btn-outline-success ">
                                <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-file-earmark-pdf" viewBox="0 0 16 16">
                                    <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2M9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/>
                                    <path d="M4.603 14.087a.8.8 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.7 7.7 0 0 1 1.482-.645 20 20 0 0 0 1.062-2.227 7.3 7.3 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a11 11 0 0 0 .98 1.686 5.8 5.8 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.86.86 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.7 5.7 0 0 1-.911-.95 11.7 11.7 0 0 0-1.997.406 11.3 11.3 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.8.8 0 0 1-.58.029m1.379-1.901q-.25.115-.459.238c-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361q.016.032.026.044l.035-.012c.137-.056.355-.235.635-.572a8 8 0 0 0 .45-.606m1.64-1.33a13 13 0 0 1 1.01-.193 12 12 0 0 1-.51-.858 21 21 0 0 1-.5 1.05zm2.446.45q.226.245.435.41c.24.19.407.253.498.256a.1.1 0 0 0 .07-.015.3.3 0 0 0 .094-.125.44.44 0 0 0 .059-.2.1.1 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a4 4 0 0 0-.612-.053zM8.078 7.8a7 7 0 0 0 .2-.828q.046-.282.038-.465a.6.6 0 0 0-.032-.184.9.9 0 0 0-.25.042c-.127.05-.214.136-.25.312-.036.167-.014.383.037.62.07.327.162.66.257.947z"/>
                                </svg> Documento
                            </a>
                        {% else %}
                            <button type="button" class="btn btn-secondary btn-sm" disabled>Sin Documento</button>
                        {% endif %}
                        
                    </td>
                    <td data-label="ASIGNAR">
                        <a href="{% url 'transferir_actividad' actividad.id %}" class="btn btn-outline-success btn-sm fontII">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-journal-richtext" viewBox="0 0 16 16">
                                <path d="M7.5 3.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m-.861 1.542 1.33.886 1.854-1.855a.25.25 0 0 1 .289-.047L11 4.75V7a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 7v-.5s1.54-1.274 1.639-1.208M5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5"/>
                                <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"/>
                                <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"/>
                              </svg> Repositorio
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="alert alert-light mt-2" role="alert">
            La Lista de Proyectos Aprobados Esta al Día, Esperando Nuevos Poyectos.
        </div>
        {% endif %}
    </div>
</div><br>
{% endblock %}
